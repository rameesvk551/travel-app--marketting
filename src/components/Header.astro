---
const navLinks = [
  { label: 'Features', href: '/features' },
  { label: 'WhatsApp Planner', href: '/whatsapp-planner' },
  { label: 'Pricing', href: '/pricing' },
  { label: 'Blog', href: '/blog' },
  { label: 'Tools', href: '#', children: [
    { label: 'Visa Checker', href: '/tools/visa-checker' },
    { label: 'Packing List', href: '/tools/packing-list' },
    { label: 'Trek Quiz', href: '/tools/trek-quiz' },
  ]},
];
---

<header id="main-header" class="fixed top-0 left-0 right-0 z-50 transition-all duration-300">
  <nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex items-center justify-between h-20">
      <!-- Logo -->
      <a href="/" class="flex items-center gap-2 group">
        <div class="w-10 h-10 bg-gradient-to-br from-teal-500 to-primary-500 rounded-xl flex items-center justify-center shadow-lg group-hover:shadow-xl transition-shadow">
          <svg class="w-6 h-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" />
          </svg>
        </div>
        <span class="text-2xl font-display font-bold text-primary-500">Wayon</span>
      </a>

      <!-- Desktop Nav -->
      <div class="hidden lg:flex items-center gap-1">
        {navLinks.map(link => (
          link.children ? (
            <div class="relative group">
              <button class="btn-ghost flex items-center gap-1">
                {link.label}
                <svg class="w-4 h-4 transition-transform group-hover:rotate-180" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
                </svg>
              </button>
              <div class="absolute top-full left-0 mt-2 w-56 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 transform group-hover:translate-y-0 translate-y-2">
                <div class="glass rounded-xl p-2 shadow-xl">
                  {link.children.map(child => (
                    <a href={child.href} class="block px-4 py-3 text-sm text-dark-500 hover:bg-teal-50 hover:text-teal-600 rounded-lg transition-colors">
                      {child.label}
                    </a>
                  ))}
                </div>
              </div>
            </div>
          ) : (
            <a href={link.href} class="btn-ghost">{link.label}</a>
          )
        ))}
      </div>

      <!-- Desktop CTA -->
      <div class="hidden lg:flex items-center gap-4">
        <a href="/contact" class="btn-ghost text-sm">Contact</a>
        <a href="#hero-input" class="btn-primary !py-3 !px-6 !text-sm">
          Start Planning Free
          <svg class="w-4 h-4 ml-2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M13 7l5 5m0 0l-5 5m5-5H6" />
          </svg>
        </a>
      </div>

      <!-- Mobile Toggle -->
      <button id="mobile-toggle" class="lg:hidden p-2 rounded-lg hover:bg-gray-100 transition-colors" aria-label="Toggle menu">
        <svg id="menu-open-icon" class="w-6 h-6 text-dark-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16" />
        </svg>
        <svg id="menu-close-icon" class="w-6 h-6 text-dark-500 hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>
    </div>
  </nav>

  <!-- Mobile Menu -->
  <div id="mobile-menu" class="lg:hidden hidden">
    <div class="glass mx-4 rounded-2xl p-6 mt-2 shadow-xl">
      <div class="flex flex-col gap-2">
        {navLinks.map(link => (
          link.children ? (
            <div class="space-y-1">
              <span class="block px-4 py-2 font-semibold text-dark-400 text-sm uppercase tracking-wider">{link.label}</span>
              {link.children.map(child => (
                <a href={child.href} class="block px-6 py-2 text-dark-500 hover:text-teal-600 hover:bg-teal-50 rounded-lg transition-colors">
                  {child.label}
                </a>
              ))}
            </div>
          ) : (
            <a href={link.href} class="block px-4 py-3 text-dark-500 hover:text-teal-600 hover:bg-teal-50 rounded-lg transition-colors font-medium">
              {link.label}
            </a>
          )
        ))}
        <hr class="my-2 border-gray-200" />
        <a href="#hero-input" class="btn-primary text-center">Start Planning Free</a>
      </div>
    </div>
  </div>
</header>

<script>
  // Header scroll effect
  const header = document.getElementById('main-header');
  window.addEventListener('scroll', () => {
    if (window.scrollY > 50) {
      header?.classList.add('bg-white/90', 'backdrop-blur-xl', 'shadow-sm');
    } else {
      header?.classList.remove('bg-white/90', 'backdrop-blur-xl', 'shadow-sm');
    }
  });

  // Mobile menu toggle
  const toggle = document.getElementById('mobile-toggle');
  const menu = document.getElementById('mobile-menu');
  const openIcon = document.getElementById('menu-open-icon');
  const closeIcon = document.getElementById('menu-close-icon');

  toggle?.addEventListener('click', () => {
    menu?.classList.toggle('hidden');
    openIcon?.classList.toggle('hidden');
    closeIcon?.classList.toggle('hidden');
  });
</script>
